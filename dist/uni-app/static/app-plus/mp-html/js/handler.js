"use strict";var t;document.addEventListener("UniAppJSBridgeReady",(function(){document.body.onclick=function(){return uni.postMessage({data:{action:"onClick"}})},uni.postMessage({data:{action:"onJSBridgeReady"}})}));var e=[];function n(t){for(var e=Object.create(null),n=t.attributes.length;n--;)e[t.attributes[n].name]=t.attributes[n].value;return e}function o(){t[1]&&(this.src=t[1],this.onerror=null),this.onclick=null,this.ontouchstart=null,uni.postMessage({data:{action:"onError",source:"img",attrs:n(this)}})}function a(){window.unloadimgs-=1,0===window.unloadimgs&&uni.postMessage({data:{action:"onReady"}})}function i(r,s,c){for(var d=function(){var d,l=r[u];if(l.type&&"node"!==l.type)d=document.createTextNode(l.text.replace(/&amp;/g,"&"));else{var g=l.name;for(var p in"svg"===g&&(c="http://www.w3.org/2000/svg"),"html"!==g&&"body"!==g||(g="div"),d=c?document.createElementNS(c,g):document.createElement(g),l.attrs)d.setAttribute(p,l.attrs[p]);if(l.children&&i(l.children,d,c),"img"===g){if(window.unloadimgs+=1,d.onload=a,d.onerror=a,!d.src&&d.getAttribute("data-src")&&(d.src=d.getAttribute("data-src")),l.attrs.ignore||(d.onclick=function(t){t.stopPropagation(),uni.postMessage({data:{action:"onImgTap",attrs:n(this)}})}),t[2]){var h=new Image;h.src=d.src,d.src=t[2],h.onload=function(){d.src=this.src},h.onerror=function(){d.onerror()}}d.onerror=o}else if("a"===g)d.addEventListener("click",(function(t){t.stopPropagation(),t.preventDefault();var e,o=this.getAttribute("href");o&&"#"===o[0]&&(e=(document.getElementById(o.substr(1))||{}).offsetTop),uni.postMessage({data:{action:"onLinkTap",attrs:n(this),offset:e}})}),!0);else if("video"===g||"audio"===g)e.push(d),l.attrs.autoplay||l.attrs.controls||d.setAttribute("controls","true"),d.onplay=function(){if(uni.postMessage({data:{action:"onPlay"}}),t[3])for(var n=0;n<e.length;n++)e[n]!==this&&e[n].pause()},d.onerror=function(){uni.postMessage({data:{action:"onError",source:g,attrs:n(this)}})};else if("table"===g&&t[4]&&!d.style.cssText.includes("inline")){var f=document.createElement("div");f.style.overflow="auto",f.appendChild(d),d=f}else"svg"===g&&(c=void 0)}s.appendChild(d)},u=0;u<r.length;u++)d()}window.setContent=function(n,o,a){var r=document.getElementById("content");o[0]&&(document.body.style.cssText=o[0]),o[5]||(r.style.userSelect="none"),a||(r.innerHTML="",e=[]),t=o,window.unloadimgs=0;var s=document.createDocumentFragment();i(n,s),r.appendChild(s);var c=r.scrollHeight;uni.postMessage({data:{action:"onLoad",height:c}}),window.unloadimgs||uni.postMessage({data:{action:"onReady",height:c}}),clearInterval(window.timer),window.timer=setInterval((function(){r.scrollHeight!==c&&(c=r.scrollHeight,uni.postMessage({data:{action:"onHeightChange",height:c}}))}),350)},window.onunload=function(){clearInterval(window.timer)};